<!DOCTYPE html>
<html id="html">
<head>
	<title>jQuery - Pretty date plugin testsuite</title>
	<link rel="Stylesheet" media="screen" href="qunit/qunit.css" />
	<script src="qunit/qunit.js"></script>
	<script src="../lib/jquery.js"></script>
	<script src="../jquery.prettydate.js"></script>

	<script>
		$.prettyDate.now = function() {
			return new Date("2008/01/28 22:25:00");
		};
		test("standalone format", function() {
			same($("#main a").map(function() {
				return $.prettyDate.format(this.title) || "can't format";
			}).get(), ["2 hours ago", "Yesterday", "2 days ago", "2 weeks ago", "can't format"])
		});
		test("plugin", function() {
			same($("#main a").prettyDate().map(function() {
				return $(this).text();
			}).get(), ["2 hours ago", "Yesterday", "2 days ago", "2 weeks ago", "x"])
		})
		test("localized", function() {
			var org = $.extend({}, $.prettyDate.messages);
			$.prettyDate.messages.hours = $.prettyDate.template("text {0} text");
			$("#main a:first").prettyDate();
			same($("#main a:first").text(), "text 2 text");
			$.prettyDate.messages = org;
		})
		test("attribute", function() {
			same($("#alternate a").prettyDate({attribute: "date"}).map(function() {
				return $(this).text();
			}).get(), ["2 hours ago"])
		})
		test("UTC", function() {
			$.prettyDate.now = function() {
				var date = new Date("2008/01/28 22:25:00");
				date = new Date(date.getTime() - date.getTimezoneOffset() * 60 * 1000);
				return date;
			};
			same($("#utc a").prettyDate({isUTC: true}).map(function() {
				return $(this).text();
			}).get(), ["2 hours ago", "Yesterday", "2 days ago", "2 weeks ago", "x"])
		})
	</script>
</head>
<body>
	<h1 id="qunit-header">jquery-prettydate Test Suite</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">
		<div id="main">
			<a title="2008-01-28T20:24:17Z">x</a>
			<a title="2008-01-27T22:24:17Z">x</a>
			<a title="2008-01-26T22:24:17Z">x</a>
			<a title="2008-01-14T22:24:17Z">x</a>
			<a title="2007-12-15T22:24:17Z">x</a>
		</div>
		<div id="alternate">
			<a date="2008-01-28T20:24:17Z">x</a>
		</div>
		<div id="utc">
			<a title="2008-01-28T20:24:17Z">x</a>
			<a title="2008-01-27T22:24:17Z">x</a>
			<a title="2008-01-26T22:24:17Z">x</a>
			<a title="2008-01-14T22:24:17Z">x</a>
			<a title="2007-12-15T22:24:17Z">x</a>
		</div>
	</div>
</body>
</html>
